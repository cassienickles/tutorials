{"title":"Introduction to Programmatic Common Metadata Repository Search","markdown":{"headingText":"Introduction to Programmatic Common Metadata Repository Search","containsRefs":false,"markdown":"\n\nThis notebook will introduce you to programmatic Common Metadata Repository (CMR) search in python, using PO.DAAC Data as the example of data we're interested in. While these tutorials focus on PO.DAAC data, the same strategies and code snippets can be used for other earthdata collections.\n\n\n## API Documentation\n\nThis tutorial is not meant to be a replacement for the official CMR documentation. Its features are well documented and that should be the first place to go for information. It can be found at https://cmr.earthdata.nasa.gov/search. Some users may find it easier to navigate the Earthdata Search interface, find data of interest, and then automate the results using scripts. We'd suggest visiting https://search.earthdata.nasa.gov/\n\n\n## CMR Background information\n\nCMR houses metadata for the 12 different DAACs. These come in the following forms:\n\n* Collections\n* Granules\n* Variables\n* Services\n* Visualizations\n* Tools\n\nThis tutorial will focus on Collections and Granules. for more information, see the https://earthdata.nasa.gov/learn/user-resources/glossary\n\n## Collection / Dataset Series\n\nCollection of datasets sharing the same product specification. They are synonym of EO collections. They are named dataset series as they may be mapped to ‘dataset series’ according to the terminology defined in ISO 19113, ISO 19114 and ISO 19115. \n\n## Granule\n\nThe smallest aggregation of data which is independently managed (i. e. described, inventoried, retrievable). Granules may be managed as logical granules and/or physical granules. See also Scene.\n\nNote that granule is often equivalent to Data Set.\n\n## Data Set\n\nA logically meaningful grouping or collection of similar or related data. Data having all of the same characteristics (source or class of source, processing level, resolution, etc.) but different independent variable ranges and/or responding to a specific need are normally considered part of a single data set. A data set is typically composed by products from several missions, gathered together to respond to the overall coverage or revisit requirements from a specific group of users.\n\nIn the context of EO data preservation a data set consists of the data records of one mission, sensor, and product type and the associated knowledge(information, tools). See collection.\n\n## What does all of this mean?\n\nFor the most part, users want to discover collections of interest to them, usually defined by parameter (Sea Surface Temperature, Ocean Winds, Sea Surface Height, etc), Level, spatial and temporal coverage, etc. Lets show an example.\n\n## Find collections by parameter\n\nThere's a lot going on here. First off, the url:\n```\nhttps://cmr.earthdata.nasa.gov/search/collections.umm_json?science_keywords[0][topic]=OCEANS\n```\n\nThe basic premise is this: We are asking for all collections (../search/collections) that fall under the 'OCEANS' science topic as defined by GCMD. We are requesting this in the umm_json format (.umm_json). What we get back is a listing of those collections matching this. When last run, this was over 10900 collections! that's a lot. Let's get that down a bit...\n\n\nHere we're now limiting the search to those with the Oceans topic as well as the 'Ocean Temperature' term. To limit this further, we are only searching for collections that contain granules (data). We do this by specifying\n\n```\nhas_granules_or_cwic=true\n```\n\nSo we are closing in on this. Let's add a time range and find some PO.DAAC data:\n\n```\ntemporal=2018-01-01T10:00:00Z,2019-01-01T10:00:00Z&provider_short_name=PODAAC&processing_level_id=4\n```\n\nwe sepcified a temporal range for all of 2018, PODAAC as the provider, and level 4 data, since it's a bit easier for us to work with.\n\nok, that got us down to ~29 collections. Let's use python to get some information we're interested in.\n\nWe now have the start times, CMR Concept-ID (the unique collection identifier), title, and Bounding rectangles for spatial coverage. This is a lot of information we can use to decide on a dataset, and we can keep adding more information. \n\nFor now, lets choose \"C1664741463-PODAAC\": GHRSST Level 4 MUR Global Foundation Sea Surface Temperature Analysis (v4.1)\n\n## Granule Search\n\nUsing this collection, and more specifically, its concept-ID, we can now search for data we're interested in.\n\n\nAlright, 6497 hits (at time of this writing). Let's once again use some parsing magic to get some information on these data granules.\n\nUsing the above information, we can find the size and location (both whole file and OPeNDAP) URLs.\n"},"formats":{"html":{"execute":{"fig-width":7,"fig-height":5,"fig-format":"retina","fig-dpi":96,"df-print":"default","error":false,"eval":true,"cache":null,"freeze":false,"echo":true,"output":true,"warning":true,"include":true,"keep-md":false,"keep-ipynb":false,"ipynb":null,"enabled":false,"daemon":null,"daemon-restart":false,"debug":false,"ipynb-filters":[],"engine":"jupyter"},"render":{"keep-tex":false,"keep-yaml":false,"keep-source":false,"keep-hidden":false,"prefer-html":false,"output-divs":true,"output-ext":"html","fig-align":"default","fig-pos":null,"fig-env":null,"code-fold":"none","code-overflow":"wrap","code-link":false,"code-line-numbers":false,"code-tools":false,"tbl-colwidths":"auto","merge-includes":true,"latex-auto-mk":true,"latex-auto-install":true,"latex-clean":true,"latex-max-runs":10,"latex-makeindex":"makeindex","latex-makeindex-opts":[],"latex-tlmgr-opts":[],"latex-input-paths":[],"latex-output-dir":null,"link-external-icon":false,"link-external-newwindow":false,"self-contained-math":false,"format-resources":[]},"pandoc":{"standalone":true,"wrap":"none","default-image-extension":"png","to":"html","filters":["../include-files.lua","quarto"],"toc":true,"output-file":"podaac_cmr_tutorial.html"},"language":{},"metadata":{"lang":"en","fig-responsive":true,"quarto-version":"1.1.251","theme":{"light":["cosmo","theme.scss"],"dark":["cosmo","theme-dark.scss"]},"code-copy":true},"extensions":{"book":{"multiFile":true}}}}}