{"title":"A newer version of this Notebook exists [here](https://github.com/podaac/tutorials/blob/master/notebooks/HUC%20Feature%20Translation%20Service%20Examples-updated-20210804.ipynb).","markdown":{"headingText":"A newer version of this Notebook exists [here](https://github.com/podaac/tutorials/blob/master/notebooks/HUC%20Feature%20Translation%20Service%20Examples-updated-20210804.ipynb).","containsRefs":false,"markdown":"\n## HUC Feature Translation Service (FTS) Examples\n\nThis Jupyter Notebook contains examples related to querying the *HUC Feature Translation Service (FTS)*, previewing (viusualizing) the queried region of interest, and using FTS results to query NASA's Common Metadata Repository (CMR).\n\n**Example Use Case:** \nCheck if data is available over my region of interest using HUCs. In this example we are using FTS to geospatially define our region of interest, namely the Upper Tuolumne River Basin in the San Joaquin River Basin in California's Sierra Nevada, searching by HUC or region name, and then using those geospatial bounds (coordinates) to query Sentinel-1 data in CMR.\n1. use FTS to define geographic region of interest (query by partial or exact HUC or HUC region name)\n2. preview query \n3. use coordinates returned by FTS to query Sentinel-1 data in CMR, by polygon or bounding box.\n\n**Resources**\n\nUSGS Hydrologic unit map to help identifiy region of interest (e.g. HUC value or name) can be found here: https://water.usgs.gov/GIS/regions.html \n\n## Search Feature Translation Service for Partial Region Matches\n\nIf you are unsure what the corresponding HUC is for your region of interest, you can query the FTS for _partial_ region matches.\n\n## Search Feature Translation Service for Exact HUC Matches\n\nHere we can define a HUC, or hydrologic unit code, and use this to query the HUC FTS. By defining the parameter _EXACT = True_, we tell the query to not search for partial matches.\n\nBased on the partial response in the previous step, we can now do an exact search for SJRB, using its HUC (1804).\n\n## Search Feature Translation Service for Partial Region Matches\n\nBut we are specifically interested in Tuolumne RB within the San Joaquin, so let's do a partial search for \"Upper Tuo\", given we may not know the exact region name.\n\n## Search Feature Translation Service for Exact Named Region Matches\n\nGiven the above response, or that we already know an exact region name or HUC in USGS's Watershed Boundary Dataset (WBD), we can use this instead of a partial search. Below is an example of exact matches by HUC (18040009), and then by region name (\"Upper Tuolumne\").\n\n# Visualize the Response from the HUC Feature Translation Service\n\nBelow are two examples of how to visualize the response from the Feature Translation Service. As of now, without support from the Earthdata search client, there's no easy way to glean whether your response _is_ indeed correct. So, here I provide code that takes a response from the HUC Feature Translation Service, and graphs the associated bounding boxes, convex hull polygons, and Visvalingam-Whyatt polygons.\n\n## Function for Visualization\n\nBelow is a function created specifically to visualize the output of the HUC Feature Translation Service. \n\n## Visualization\n\nWe can take that response and pass it to the _visualize()_ function created above. \n\n---\n---\n\n## Query CMR by Polygon\n\nHere is a more useful example of the Feature Translation Service. We can use results obtained from the FTS to then directly and automatically query CMR. Below I'm extracting the polygon representing Upper Tuolumne River Basin within the San Joaquin River Basin, and using it to search for granules available through the Sentinel-1 mission. \n\n## Query CMR by Bounding Box\n\nInstead of querying via polygon, we can extract the bounding box of the region and use this to query CMR. Similarly to above, we're extracting information (this time the bounding box) from the Upper Tuolumne River Basin and using this to search for granules available through the Sentinel-1 mission. \n\nHere we query by _region_ in these two examples, however it would be equally valid to query by _HUC_. \n"},"formats":{"html":{"execute":{"fig-width":7,"fig-height":5,"fig-format":"retina","fig-dpi":96,"df-print":"default","error":false,"eval":true,"cache":null,"freeze":false,"echo":true,"output":true,"warning":true,"include":true,"keep-md":false,"keep-ipynb":false,"ipynb":null,"enabled":false,"daemon":null,"daemon-restart":false,"debug":false,"ipynb-filters":[],"engine":"jupyter"},"render":{"keep-tex":false,"keep-yaml":false,"keep-source":false,"keep-hidden":false,"prefer-html":false,"output-divs":true,"output-ext":"html","fig-align":"default","fig-pos":null,"fig-env":null,"code-fold":"none","code-overflow":"wrap","code-link":false,"code-line-numbers":false,"code-tools":false,"tbl-colwidths":"auto","merge-includes":true,"latex-auto-mk":true,"latex-auto-install":true,"latex-clean":true,"latex-max-runs":10,"latex-makeindex":"makeindex","latex-makeindex-opts":[],"latex-tlmgr-opts":[],"latex-input-paths":[],"latex-output-dir":null,"link-external-icon":false,"link-external-newwindow":false,"self-contained-math":false,"format-resources":[]},"pandoc":{"standalone":true,"wrap":"none","default-image-extension":"png","to":"html","filters":["../include-files.lua","quarto"],"toc":true,"output-file":"HUC Feature Translation Service Examples.html"},"language":{},"metadata":{"lang":"en","fig-responsive":true,"quarto-version":"1.1.251","theme":{"light":["cosmo","theme.scss"],"dark":["cosmo","theme-dark.scss"]},"code-copy":true},"extensions":{"book":{"multiFile":true}}}}}